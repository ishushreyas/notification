<body>
  <p id="token"> token</p>
</body>
<script type="module">
  <script type="module">

  // Import the functions you need from the SDKs you need

  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-app.js";

  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-analytics.js";

  // TODO: Add SDKs for Firebase products that you want to use

  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration

  // For Firebase JS SDK v7.20.0 and later, measurementId is optional

  const firebaseConfig = {

    apiKey: "AIzaSyAN-X9u7n7QnM8RLrVV4YnXq2MmVz6WNfw",

    authDomain: "em-issyoo.firebaseapp.com",

    projectId: "em-issyoo",

    storageBucket: "em-issyoo.appspot.com",

    messagingSenderId: "33480809995",

    appId: "1:33480809995:web:74df1e056f7638d0b5310e",

    measurementId: "G-C64NWHRT0Y"

  };
import { getMessaging, getToken } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-messaging.js";


  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
const db = getFirestore();

const messaging = firebase.messaging();

 messaging.requestPermission()

     .then(function () {

         alert('have permission');

         return messaging.getToken();

         console.log(messaging.getToken());

     })

     .then(function (token) {

         newToken = token
         document.getElementById("token").textContent = newToken; 
         console.log(newToken);

     })

     .catch(function (err) {

         alert(err);

     })

 messaging.onMessage(function (payload) {

     alert('onMessage: ', payload)

 })
  
  
  </script>
